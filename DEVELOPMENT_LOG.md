# ì²­ë…„ ì •ì±… êµìœ¡ í”Œë«í¼ V2 - ê°œë°œ ì‘ì—… ê¸°ë¡

**í”„ë¡œì íŠ¸**: ì²­ë…„ ì •ì±… êµìœ¡ í”Œë«í¼ V2
**ì‹œì‘ì¼**: 2026-01-12
**ê¸°ìˆ  ìŠ¤íƒ**: Vue 3 + Quasar + Supabase
**ë°°í¬ URL**: https://youth-policy-v2.vercel.app
**GitHub**: https://github.com/SqurareEgg/youth-policy-v2

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì£¼ìš” ë³€ê²½ì‚¬í•­ (V1 â†’ V2)](#ì£¼ìš”-ë³€ê²½ì‚¬í•­-v1--v2)
3. [ê°œë°œ ê³¼ì •](#ê°œë°œ-ê³¼ì •)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [êµ¬í˜„ëœ ê¸°ëŠ¥](#êµ¬í˜„ëœ-ê¸°ëŠ¥)
6. [ì§„ë„ìœ¨ ê³„ì‚° ì‹œìŠ¤í…œ](#ì§„ë„ìœ¨-ê³„ì‚°-ì‹œìŠ¤í…œ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
8. [ë°°í¬ ë° ì„¤ì •](#ë°°í¬-ë°-ì„¤ì •)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 
ì²­ë…„ë“¤ì´ ì²­ë…„ ì •ì±…ì„ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•˜ê³ , í•™ìŠµ ì§„ë„ë¥¼ ì¶”ì í•  ìˆ˜ ìˆëŠ” êµìœ¡ í”Œë«í¼ ê°œë°œ

### í•µì‹¬ ìš”êµ¬ì‚¬í•­
- **6ê°œ ê³ ì • ì¹´í…Œê³ ë¦¬**: ì§€ì—­ì •ì£¼, ì£¼ê±°ì§€ì›, ë³µì§€ì •ì±…, ê¸ˆìœµì§€ì›, ì°¸ì—¬ì •ì±…, êµìœ¡ì •ì±…
- **4ë‹¨ê³„ í•™ìŠµ ì‹œìŠ¤í…œ**:
  1. ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ (10%)
  2. QnA í•™ìŠµ (20%)
  3. ì˜ìƒ í•™ìŠµ (40%)
  4. OX í€´ì¦ˆ (30%)
- **ì‹¤ì‹œê°„ ì§„ë„ìœ¨ ì¶”ì **
- **ì´ë©”ì¼ ì¸ì¦ ì—†ëŠ” ì¦‰ì‹œ íšŒì›ê°€ì…**
- **2025ë…„ ì‹¤ì œ ì²­ë…„ ì •ì±… ë°ì´í„° ê¸°ë°˜**

---

## ì£¼ìš” ë³€ê²½ì‚¬í•­ (V1 â†’ V2)

### 1. ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ
- **V1**: ë™ì  ì •ì±… ëª©ë¡ (ì—¬ëŸ¬ ì •ì±… í‘œì‹œ)
- **V2**: 6ê°œ ê³ ì • ì¹´í…Œê³ ë¦¬ (ì²´ê³„ì  ë¶„ë¥˜)

### 2. ì§„ë„ìœ¨ ê³„ì‚°
- **V1**: ìƒì„¸ 30% + ì˜ìƒ 30% + í€´ì¦ˆ 40% = 100%
- **V2**: ìƒì„¸ 10% + QnA 20% + ì˜ìƒ 40% + í€´ì¦ˆ 30% = 100%
  - QnA í•™ìŠµ ì¶”ê°€ (ì•„ì½”ë””ì–¸ í˜•íƒœ)
  - ì˜ìƒ ë¹„ì¤‘ ì¦ê°€ (30% â†’ 40%)

### 3. í•™ìŠµ ë°©ì‹
- **V1**: ìƒì„¸ ì„¤ëª…, ì˜ìƒ, í€´ì¦ˆ
- **V2**: QnA ì•„ì½”ë””ì–¸ ì¶”ê°€ (ì§ˆë¬¸-ë‹µë³€ í˜•ì‹)

### 4. ë°ì´í„°ë² ì´ìŠ¤
- **V1**: 6ê°œ í…Œì´ë¸”
- **V2**: 8ê°œ í…Œì´ë¸” (qna_items, qna_view_logs ì¶”ê°€)

---

## ê°œë°œ ê³¼ì •

### Phase 1: í”„ë¡œì íŠ¸ ì„¤ì • ë° ì´ˆê¸°í™” (1ì¼ì°¨)

#### 1.1 ìš”êµ¬ì‚¬í•­ ë¶„ì„
- V2 ë””ìì¸ ìš”êµ¬ì‚¬í•­ í™•ì¸
- ì§„ë„ìœ¨ ê³„ì‚° ë°©ì‹ ì œì•ˆ (ì œì•ˆ2 ì±„íƒ, ì œì•ˆ3 ê¸°ê°)
- ì´ë©”ì¼ ì¸ì¦ ì œê±° ê²°ì •

#### 1.2 ERD ì„¤ê³„
- 8ê°œ í…Œì´ë¸” ì„¤ê³„
- ì§„ë„ìœ¨ ìë™ ê³„ì‚° íŠ¸ë¦¬ê±° ì„¤ê³„
- RLS(Row Level Security) ì •ì±… ìˆ˜ë¦½

ë¬¸ì„œ: `C:\WebWork\YouthV1\YouthV2_ERD.md`

#### 1.3 í™”ë©´ ì„¤ê³„
- 7ê°œ í˜ì´ì§€ UX/UI ì„¤ê³„
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (3x2 â†” 2x3)

ë¬¸ì„œ: `C:\WebWork\YouthV1\YouthV2_Screen_Design.md`

#### 1.4 í”„ë¡œì íŠ¸ ìƒì„±
```bash
mkdir C:\WebWork\YouthV2
cd C:\WebWork\YouthV2
npm init -y
npm install -g @quasar/cli
npm install
```

**ìƒì„±ëœ íŒŒì¼**:
- `package.json` - í”„ë¡œì íŠ¸ ì˜ì¡´ì„±
- `quasar.config.js` - Quasar ì„¤ì • (ESM í˜•ì‹)
- `index.html` - ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
- `.env` - Supabase í™˜ê²½ë³€ìˆ˜

---

### Phase 2: Supabase ì„¤ì • (1ì¼ì°¨)

#### 2.1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±

**íŒŒì¼**: `supabase/migrations/001_initial_schema.sql`

**ì£¼ìš” í…Œì´ë¸”**:
1. `user_profiles` - ì‚¬ìš©ì í”„ë¡œí•„
2. `education_categories` - 6ê°œ êµìœ¡ ì¹´í…Œê³ ë¦¬
3. `qna_items` - QnA í•™ìŠµ ë°ì´í„°
4. `category_videos` - êµìœ¡ ì˜ìƒ
5. `category_quizzes` - OX í€´ì¦ˆ
6. `user_category_progress` - í•™ìŠµ ì§„ë„ìœ¨
7. `qna_view_logs` - QnA ì—´ëŒ ê¸°ë¡
8. `quiz_attempts` - í€´ì¦ˆ ì‹œë„ ê¸°ë¡

#### 2.2 ì§„ë„ìœ¨ ìë™ ê³„ì‚° íŠ¸ë¦¬ê±°

```sql
CREATE OR REPLACE FUNCTION calculate_progress()
RETURNS TRIGGER AS $$
BEGIN
  -- ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ (10%)
  IF NEW.page_visited THEN
    NEW.total_progress := 10;
  ELSE
    NEW.total_progress := 0;
  END IF;

  -- QnA ì§„ë„ìœ¨ ê³„ì‚° (0~20%)
  IF NEW.qna_total_count > 0 THEN
    NEW.qna_progress := ROUND((NEW.qna_opened_count::FLOAT / NEW.qna_total_count) * 20);
    NEW.total_progress := NEW.total_progress + NEW.qna_progress;
  END IF;

  -- ì˜ìƒ ì§„ë„ìœ¨ ê³„ì‚° (0~40%)
  IF NEW.video_duration > 0 THEN
    IF NEW.video_watch_time >= NEW.video_duration THEN
      NEW.video_progress := 40;
      NEW.video_completed := true;
    ELSE
      NEW.video_progress := ROUND((NEW.video_watch_time::FLOAT / NEW.video_duration) * 40);
    END IF;
    NEW.total_progress := NEW.total_progress + NEW.video_progress;
  END IF;

  -- í€´ì¦ˆ ì§„ë„ìœ¨ ê³„ì‚° (0~30%)
  IF NEW.quiz_passed THEN
    NEW.quiz_progress := 30;
    NEW.total_progress := NEW.total_progress + 30;
  END IF;

  -- ì´ìˆ˜ ì™„ë£Œ ì²´í¬
  IF NEW.total_progress >= 100 THEN
    NEW.is_completed := true;
    IF NEW.completed_at IS NULL THEN
      NEW.completed_at := NOW();
    END IF;
  ELSE
    NEW.is_completed := false;
  END IF;

  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

#### 2.3 ìƒ˜í”Œ ë°ì´í„° ìƒì„±

**íŒŒì¼**: `supabase/002_insert_sample_data.sql`

**2025ë…„ ì‹¤ì œ ì²­ë…„ ì •ì±… ê¸°ë°˜**:
- ì²­ë…„ë¯¸ë˜ì ê¸ˆ (6~12% ì •ë¶€ ê¸°ì—¬ê¸ˆ)
- ì²­ë…„ ì›”ì„¸ ì§€ì› (ì›” 20ë§Œì›, 12ê°œì›”)
- ëŒ€ì „ì‹œ ì²­ë…„ ì„ëŒ€ì£¼íƒ (ìµœëŒ€ 10ë…„)
- K-ë””ì§€í„¸ íŠ¸ë ˆì´ë‹ (ì›” 116ë§Œì› í›ˆë ¨ì¥ë ¤ê¸ˆ)
- ì²­ë…„ ì •ì‹ ê±´ê°• ê²€ì§„ (10ë…„ â†’ 2ë…„ ë‹¨ì¶•)

**ë°ì´í„° ê·œëª¨**:
- ì¹´í…Œê³ ë¦¬: 6ê°œ
- QnA í•­ëª©: 34ê°œ
- êµìœ¡ ì˜ìƒ: 6ê°œ
- OX í€´ì¦ˆ: 60ê°œ (ì¹´í…Œê³ ë¦¬ë‹¹ 10ê°œ)

ì¶œì²˜:
- [ëŒ€ì „ì²­ë…„ë‚´ì¼ì¬ë‹¨](https://www.daejeon.go.kr/drh/DrhContentsHtmlView.do?menuSeq=6666)
- [2ì°¨ ì²­ë…„ì •ì±… ê¸°ë³¸ê³„íš](https://www.korea.kr/news/policyNewsView.do?newsId=148957171)
- [2025ë…„ ì²­ë…„ ì£¼ê±°Â·ê¸ˆìœµ ì§€ì› ì •ì±…](https://angelsitter.co.kr/board.view.php?board=bbs&no=1822)

---

### Phase 3: ê¸°ë³¸ í˜ì´ì§€ êµ¬í˜„ (1ì¼ì°¨)

#### 3.1 ì¸ì¦ í˜ì´ì§€

**LandingPage.vue**:
- ëœë”© í˜ì´ì§€ (ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼)
- ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ í›„ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

**LoginPage.vue**:
- Supabase `signInWithPassword`
- ì—ëŸ¬ ì²˜ë¦¬ ë° ì•Œë¦¼

**RegisterPage.vue**:
- Supabase `signUp` (ì´ë©”ì¼ ì¸ì¦ ì—†ìŒ)
- `user_profiles` í…Œì´ë¸”ì— í”„ë¡œí•„ ì§ì ‘ ìƒì„±
- íšŒì›ê°€ì… ì¦‰ì‹œ ë¡œê·¸ì¸ ê°€ëŠ¥

#### 3.2 ë¼ìš°í„° ì„¤ì •

**routes.js**:
```javascript
// ì¸ì¦ ê°€ë“œ
async function requireAuth(to, from, next) {
  const { data: { session } } = await supabase.auth.getSession()
  if (session) {
    next()
  } else {
    next('/auth/login')
  }
}

// ê²ŒìŠ¤íŠ¸ ì „ìš© ê°€ë“œ
async function guestOnly(to, from, next) {
  const { data: { session } } = await supabase.auth.getSession()
  if (session) {
    next('/main')
  } else {
    next()
  }
}
```

#### 3.3 ë ˆì´ì•„ì›ƒ

**MainLayout.vue**:
- QLayout, QHeader, QPageContainer êµ¬ì¡°
- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
- ë„¤ë¹„ê²Œì´ì…˜

---

### Phase 4: ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë° ì—ëŸ¬ ìˆ˜ì • (1ì¼ì°¨)

#### 4.1 Quasar ì„¤ì • ì—ëŸ¬
**ì—ëŸ¬**: "Dynamic require of 'quasar/wrappers' is not supported"

**ì›ì¸**: `quasar.config.js`ê°€ CommonJS í˜•ì‹

**í•´ê²°**:
```javascript
// Before (CommonJS)
const { configure } = require('quasar/wrappers')
module.exports = configure(...)

// After (ESM)
import { configure } from 'quasar/wrappers'
export default configure(...)
```

#### 4.2 index.html ì—ëŸ¬
**ì—ëŸ¬**: "Please remove <div id='q-app'> from /index.html"

**ì›ì¸**: Quasarê°€ ìë™ìœ¼ë¡œ q-appì„ ì£¼ì…í•˜ë¯€ë¡œ ìˆ˜ë™ ì¶”ê°€ ë¶ˆí•„ìš”

**í•´ê²°**:
```html
<body>
  <!-- quasar:entry-point -->
</body>
```

#### 4.3 ìºì‹œ ë¬¸ì œ
**ì—ëŸ¬**: ë¹Œë“œ ì˜¤ë¥˜ ì§€ì†

**í•´ê²°**:
```bash
npx quasar clean
npm run dev
```

**ì„±ê³µ**: http://localhost:9000 ì—ì„œ ì •ìƒ ì‘ë™

---

### Phase 5: GitHub ë° Vercel ë°°í¬ (1ì¼ì°¨)

#### 5.1 GitHub ë ˆí¬ì§€í† ë¦¬ ìƒì„±

```bash
cd /c/WebWork/YouthV2
git init
git add .
git commit -m "Initial commit: í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡°"
git remote add origin https://github.com/SqurareEgg/youth-policy-v2.git
git branch -M main
git push -u origin main
```

#### 5.2 Vercel ë°°í¬

**vercel.json**:
```json
{
  "buildCommand": "quasar build",
  "outputDirectory": "dist/spa",
  "installCommand": "npm install",
  "devCommand": "quasar dev",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

**í™˜ê²½ ë³€ìˆ˜**:
- `VITE_SUPABASE_URL`: https://jqppkfmgciysgdydoenq.supabase.co
- `VITE_SUPABASE_ANON_KEY`: [ì‚¬ìš©ì ì œê³µ í‚¤]

**ë°°í¬ URL**: https://youth-policy-v2.vercel.app

---

### Phase 6: Production ì—ëŸ¬ ìˆ˜ì • (1ì¼ì°¨)

#### 6.1 White Screen ì—ëŸ¬ (ì²« ë²ˆì§¸)
**ì¦ìƒ**: ë°°í¬ í›„ í°ìƒ‰ í™”ë©´

**ë¡œê·¸**:
```
[Route] ë¹„ë¡œê·¸ì¸ ìƒíƒœ - /landingìœ¼ë¡œ ì´ë™
```

**ì›ì¸**: ë¹„ë™ê¸° `redirect` í•¨ìˆ˜ê°€ production ë¹Œë“œì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŒ

**í•´ê²°**: `beforeEnter` ê°€ë“œë¡œ ë³€ê²½
```javascript
// Before
{
  path: '/',
  redirect: async () => {
    // async logic
    return '/landing'
  }
}

// After
{
  path: '/',
  component: () => import('../pages/auth/LandingPage.vue'),
  beforeEnter: async (to, from, next) => {
    // async logic
    next() // or next('/main')
  }
}
```

#### 6.2 QPage ì—ëŸ¬ (ë‘ ë²ˆì§¸)
**ì¦ìƒ**: ì—¬ì „íˆ í°ìƒ‰ í™”ë©´

**ë¡œê·¸**:
```
QPage needs to be a deep child of QLayout
```

**ì›ì¸**: ì¸ì¦ í˜ì´ì§€ë“¤ì´ `<q-page>` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ `<q-layout>` ì—†ì´ ë…ë¦½ í˜ì´ì§€ë¡œ ì‚¬ìš©

**í•´ê²°**: `<q-page>` â†’ `<div class="fullscreen">`ë¡œ ë³€ê²½
- LandingPage.vue
- LoginPage.vue
- RegisterPage.vue

**ê²°ê³¼**: ëœë”© í˜ì´ì§€ ì •ìƒ í‘œì‹œ

---

### Phase 7: íšŒì›ê°€ì… ì—ëŸ¬ ìˆ˜ì • (1ì¼ì°¨)

#### 7.1 "Database error saving new user"
**ì›ì¸**: `user_profiles` í…Œì´ë¸”ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**í•´ê²°**: Supabase SQL Editorì—ì„œ `001_initial_schema.sql` ì‹¤í–‰

#### 7.2 "Email signups are disabled"
**ì›ì¸**: Supabaseì—ì„œ ì´ë©”ì¼ íšŒì›ê°€ì… ë¹„í™œì„±í™” ìƒíƒœ

**í•´ê²°**:
1. Authentication â†’ Providers â†’ Email
2. "Enable Email provider" ON
3. "Confirm email" OFF
4. Save

#### 7.3 ì—¬ì „íˆ "Database error saving new user"
**ì›ì¸**: User Profile ìë™ ìƒì„± íŠ¸ë¦¬ê±° ê¶Œí•œ ë¬¸ì œ

**í•´ê²°**: íŠ¸ë¦¬ê±° ì œê±°, ì½”ë“œì—ì„œ ì§ì ‘ ìƒì„±
```javascript
// RegisterPage.vue
if (data.user) {
  const { error: profileError } = await supabase
    .from('user_profiles')
    .insert({
      id: data.user.id,
      name: formData.name,
      email: formData.email,
      age: formData.age
    })
}
```

**ê²°ê³¼**: íšŒì›ê°€ì… ì„±ê³µ

---

### Phase 8: ë©”ì¸ í˜ì´ì§€ Supabase ì—°ë™ (2ì¼ì°¨)

#### 8.1 IndexPage ê°œì„ 
**ì´ì „**: í•˜ë“œì½”ë”©ëœ ë”ë¯¸ ë°ì´í„°

**ë³€ê²½**:
- Supabaseì—ì„œ `education_categories` ì¡°íšŒ
- ê° ì¹´í…Œê³ ë¦¬ë³„ `user_category_progress` ì¡°íšŒ
- ì‹¤ì‹œê°„ ì§„ë„ìœ¨ í‘œì‹œ

**ì£¼ìš” ì½”ë“œ**:
```javascript
const { data: categoriesData } = await supabase
  .from('education_categories')
  .select('*')
  .eq('is_active', true)
  .order('order_num', { ascending: true })

const categoriesWithProgress = await Promise.all(
  categoriesData.map(async (category) => {
    const { data: progressData } = await supabase
      .from('user_category_progress')
      .select('total_progress')
      .eq('user_id', user.id)
      .eq('category_id', category.id)
      .single()

    return {
      id: category.id,
      name: category.title,
      progress: progressData?.total_progress || 0,
      // ...
    }
  })
)
```

#### 8.2 CategoryDetailPage êµ¬í˜„
**ê¸°ëŠ¥**:
1. ì¹´í…Œê³ ë¦¬ ì •ë³´ í‘œì‹œ
2. **ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ ìë™ ì²´í¬ (10% ì ë¦½)**
3. QnA, ì˜ìƒ, í€´ì¦ˆ ê°œìˆ˜ í‘œì‹œ
4. ì„¸ë¶€ ì§„ë„ìœ¨ í‘œì‹œ (ìƒì„¸/QnA/ì˜ìƒ/í€´ì¦ˆ)

**ì§„ë„ìœ¨ ìë™ ìƒì„±**:
```javascript
let { data: progressData, error } = await supabase
  .from('user_category_progress')
  .select('*')
  .eq('user_id', user.id)
  .eq('category_id', route.params.id)
  .single()

if (error && error.code === 'PGRST116') {
  // ì§„ë„ìœ¨ ë ˆì½”ë“œ ìƒì„± (ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ = 10%)
  const { data: newProgress } = await supabase
    .from('user_category_progress')
    .insert({
      user_id: user.id,
      category_id: route.params.id,
      page_visited: true,  // 10% ì ë¦½
      qna_total_count: qnaCount.value
    })
    .select()
    .single()
}
```

---

### Phase 9: í•™ìŠµ í˜ì´ì§€ êµ¬í˜„ (2ì¼ì°¨)

#### 9.1 QnAPage.vue
**ê¸°ëŠ¥**:
- Supabaseì—ì„œ `qna_items` ì¡°íšŒ
- ì•„ì½”ë””ì–¸ í˜•íƒœë¡œ ì§ˆë¬¸/ë‹µë³€ í‘œì‹œ
- QnA ì—´ëŒ ì‹œ `qna_view_logs` ê¸°ë¡
- ëª¨ë“  QnA ì—´ëŒ ì‹œ `qna_opened_count` ì—…ë°ì´íŠ¸ (20% ë°˜ì˜)

**ì§„ë„ìœ¨ ì—…ë°ì´íŠ¸**:
```javascript
// QnA ì—´ëŒ ë¡œê·¸ ìƒì„±
await supabase.from('qna_view_logs').insert({
  user_id: user.id,
  qna_id: qnaId,
  category_id: categoryId
})

// ì—´ëŒí•œ QnA ê°œìˆ˜ í™•ì¸
const { data: viewedCount } = await supabase
  .from('qna_view_logs')
  .select('qna_id')
  .eq('user_id', user.id)
  .eq('category_id', categoryId)

// ì§„ë„ìœ¨ ì—…ë°ì´íŠ¸
await supabase
  .from('user_category_progress')
  .update({
    qna_opened_count: viewedCount.length,
    qna_total_count: totalQnaCount
  })
  .eq('user_id', user.id)
  .eq('category_id', categoryId)
```

#### 9.2 VideoPage.vue
**ê¸°ëŠ¥**:
- Supabaseì—ì„œ `category_videos` ì¡°íšŒ
- YouTube iframeìœ¼ë¡œ ì˜ìƒ ì¬ìƒ
- 5ì´ˆë§ˆë‹¤ ì‹œì²­ ì‹œê°„ ì¶”ì 
- ì˜ìƒ ì™„ë£Œ ì‹œ 40% ë°˜ì˜

**ì‹œì²­ ì‹œê°„ ì¶”ì **:
```javascript
const trackingInterval = setInterval(async () => {
  watchedTime.value += 5

  await supabase
    .from('user_category_progress')
    .update({
      video_watch_time: watchedTime.value,
      video_duration: videoDuration.value
    })
    .eq('user_id', user.id)
    .eq('category_id', categoryId)
}, 5000)
```

#### 9.3 QuizPage.vue
**ê¸°ëŠ¥**:
- Supabaseì—ì„œ `category_quizzes` ì¡°íšŒ (10ë¬¸ì œ)
- OX í€´ì¦ˆ í˜•íƒœ (í•œ ë¬¸ì œì”©)
- ì±„ì  ë° ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
- 60% ì´ìƒ â†’ `quiz_passed = true`, 30% ë°˜ì˜
- `quiz_attempts` í…Œì´ë¸”ì— ì‹œë„ ê¸°ë¡
- ì¬ì‹œë„ ê°€ëŠ¥

**ì±„ì  ë° ì§„ë„ ì—…ë°ì´íŠ¸**:
```javascript
const score = answers.filter(a => a.correct).length
const passed = (score / totalQuestions) >= 0.6

// í€´ì¦ˆ ì‹œë„ ê¸°ë¡
await supabase.from('quiz_attempts').insert({
  user_id: user.id,
  category_id: categoryId,
  score,
  total: totalQuestions,
  passed
})

// ì§„ë„ìœ¨ ì—…ë°ì´íŠ¸ (60% ì´ìƒë§Œ)
if (passed) {
  await supabase
    .from('user_category_progress')
    .update({
      quiz_attempted: true,
      quiz_score: score,
      quiz_total: totalQuestions,
      quiz_passed: true
    })
    .eq('user_id', user.id)
    .eq('category_id', categoryId)
}
```

#### 9.4 ProfilePage.vue
**ê¸°ëŠ¥**:
- ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ í‘œì‹œ
- ì „ì²´ ì´ìˆ˜ìœ¨ (6ê°œ ì¹´í…Œê³ ë¦¬ í‰ê· )
- ì¹´í…Œê³ ë¦¬ë³„ ì§„ë„ìœ¨ ë° ì„¸ë¶€ ì§„ë„ í‘œì‹œ
- ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥

**ì „ì²´ ì´ìˆ˜ìœ¨ ê³„ì‚°**:
```javascript
const overallProgress = computed(() => {
  if (categoryProgress.value.length === 0) return 0
  const total = categoryProgress.value.reduce((sum, cat) => sum + cat.progress, 0)
  return Math.round(total / categoryProgress.value.length)
})
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD ì£¼ìš” í…Œì´ë¸”

#### 1. user_profiles
```sql
CREATE TABLE user_profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  email TEXT NOT NULL UNIQUE,
  age INTEGER,
  role TEXT DEFAULT 'user',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. education_categories (6ê°œ ê³ ì •)
```sql
CREATE TABLE education_categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,  -- 'ì²­ë…„ ì£¼ê±° ì§€ì›' ë“±
  description TEXT,
  icon TEXT,  -- Material Icons ì´ë¦„
  order_num INTEGER NOT NULL,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. user_category_progress (ì§„ë„ìœ¨)
```sql
CREATE TABLE user_category_progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  category_id UUID NOT NULL REFERENCES education_categories(id) ON DELETE CASCADE,

  -- ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ (10%)
  page_visited BOOLEAN DEFAULT false,
  page_visited_at TIMESTAMP WITH TIME ZONE,

  -- QnA í•™ìŠµ (0~20%)
  qna_opened_count INTEGER DEFAULT 0,
  qna_total_count INTEGER DEFAULT 0,
  qna_progress INTEGER DEFAULT 0,
  qna_completed_at TIMESTAMP WITH TIME ZONE,

  -- ì˜ìƒ í•™ìŠµ (0~40%)
  video_watch_time INTEGER DEFAULT 0,
  video_duration INTEGER DEFAULT 0,
  video_progress INTEGER DEFAULT 0,
  video_completed BOOLEAN DEFAULT false,
  video_completed_at TIMESTAMP WITH TIME ZONE,

  -- í€´ì¦ˆ (0~30%)
  quiz_attempted BOOLEAN DEFAULT false,
  quiz_score INTEGER DEFAULT 0,
  quiz_total INTEGER DEFAULT 0,
  quiz_progress INTEGER DEFAULT 0,
  quiz_passed BOOLEAN DEFAULT false,
  quiz_completed_at TIMESTAMP WITH TIME ZONE,

  -- ì „ì²´ ì§„ë„
  total_progress INTEGER DEFAULT 0,
  is_completed BOOLEAN DEFAULT false,
  completed_at TIMESTAMP WITH TIME ZONE,

  UNIQUE(user_id, category_id)
);
```

### RLS ì •ì±…

```sql
-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ/ìˆ˜ì •
CREATE POLICY "Users can view own progress"
  ON user_category_progress FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can update own progress"
  ON user_category_progress FOR UPDATE
  USING (auth.uid() = user_id);
```

---

## êµ¬í˜„ëœ ê¸°ëŠ¥

### 1. ì¸ì¦ ì‹œìŠ¤í…œ
- âœ… íšŒì›ê°€ì… (ì´ë©”ì¼ ì¸ì¦ ì—†ìŒ)
- âœ… ë¡œê·¸ì¸
- âœ… ë¡œê·¸ì•„ì›ƒ
- âœ… ì„¸ì…˜ ê´€ë¦¬
- âœ… ì¸ì¦ ê°€ë“œ (requireAuth, guestOnly)

### 2. ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ
- âœ… 6ê°œ ê³ ì • ì¹´í…Œê³ ë¦¬
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ ë° ìƒ‰ìƒ
- âœ… ë°˜ì‘í˜• ê·¸ë¦¬ë“œ (3x2 â†” 2x3)

### 3. í•™ìŠµ ê¸°ëŠ¥
- âœ… ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ ì²´í¬ (10%)
- âœ… QnA ì•„ì½”ë””ì–¸ í•™ìŠµ (20%)
- âœ… YouTube ì˜ìƒ í•™ìŠµ (40%)
- âœ… OX í€´ì¦ˆ (30%, 60% í•©ê²©)

### 4. ì§„ë„ìœ¨ ì‹œìŠ¤í…œ
- âœ… ì‹¤ì‹œê°„ ì§„ë„ìœ¨ ê³„ì‚°
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ì„¸ë¶€ ì§„ë„ ì¶”ì 
- âœ… ì „ì²´ ì´ìˆ˜ìœ¨ í‘œì‹œ
- âœ… ìë™ íŠ¸ë¦¬ê±° (PostgreSQL)

### 5. í”„ë¡œí•„ í˜ì´ì§€
- âœ… ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
- âœ… ì „ì²´ ì´ìˆ˜ìœ¨
- âœ… 6ê°œ ì¹´í…Œê³ ë¦¬ ì§„ë„ í˜„í™©
- âœ… ë¡œê·¸ì•„ì›ƒ

---

## ì§„ë„ìœ¨ ê³„ì‚° ì‹œìŠ¤í…œ

### ê³„ì‚° ë°©ì‹

| í•­ëª© | ë°°ì  | ì¡°ê±´ |
|------|------|------|
| ìƒì„¸í˜ì´ì§€ ë°©ë¬¸ | 10% | `page_visited = true` |
| QnA í•™ìŠµ | 0~20% | `(qna_opened_count / qna_total_count) * 20` |
| ì˜ìƒ í•™ìŠµ | 0~40% | `(video_watch_time / video_duration) * 40` |
| í€´ì¦ˆ í†µê³¼ | 30% | `quiz_passed = true` (60% ì´ìƒ) |
| **í•©ê³„** | **100%** | |

### ìë™ ê³„ì‚° íŠ¸ë¦¬ê±°

`user_category_progress` í…Œì´ë¸” INSERT/UPDATE ì‹œ ìë™ ì‹¤í–‰:

```sql
CREATE TRIGGER calculate_user_progress
  BEFORE INSERT OR UPDATE ON user_category_progress
  FOR EACH ROW
  EXECUTE FUNCTION calculate_progress();
```

### ì˜ˆì‹œ

**ì‚¬ìš©ìê°€ "ì²­ë…„ ì£¼ê±° ì§€ì›" ì¹´í…Œê³ ë¦¬ í•™ìŠµ:**

1. ìƒì„¸í˜ì´ì§€ ì§„ì… â†’ `page_visited = true` â†’ **10%**
2. 5ê°œ QnA ì¤‘ 3ê°œ ì—´ëŒ â†’ `(3/5) * 20 = 12%` â†’ **10% + 12% = 22%**
3. 7ë¶„ ì˜ìƒ ì¤‘ 3ë¶„30ì´ˆ ì‹œì²­ â†’ `(210/420) * 40 = 20%` â†’ **22% + 20% = 42%**
4. í€´ì¦ˆ 10ë¬¸ì œ ì¤‘ 7ê°œ ì •ë‹µ (70%) â†’ `quiz_passed = true` â†’ **42% + 30% = 72%**

ìµœì¢… ì§„ë„ìœ¨: **72%**

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. Quasar Config í˜•ì‹ ì—ëŸ¬
**ë¬¸ì œ**: ESM vs CommonJS
**í•´ê²°**: `quasar.config.js`ë¥¼ ESMìœ¼ë¡œ ë³€ê²½

### 2. Production White Screen
**ë¬¸ì œ**: ë¹„ë™ê¸° redirect ë¯¸ì‘ë™
**í•´ê²°**: beforeEnter ê°€ë“œ ì‚¬ìš©

### 3. QPage ì»´í¬ë„ŒíŠ¸ ì—ëŸ¬
**ë¬¸ì œ**: QLayout ì—†ì´ QPage ì‚¬ìš©
**í•´ê²°**: `<div class="fullscreen">` ì‚¬ìš©

### 4. User Profile ìƒì„± ì‹¤íŒ¨
**ë¬¸ì œ**: íŠ¸ë¦¬ê±° ê¶Œí•œ ì˜¤ë¥˜
**í•´ê²°**: ì½”ë“œì—ì„œ ì§ì ‘ INSERT

### 5. Email Signup Disabled
**ë¬¸ì œ**: Supabase ì„¤ì •
**í•´ê²°**: Authentication Providersì—ì„œ Email í™œì„±í™”

---

## ë°°í¬ ë° ì„¤ì •

### Vercel ì„¤ì •

**Build Settings**:
- Build Command: `quasar build`
- Output Directory: `dist/spa`
- Install Command: `npm install`

**Environment Variables**:
```
VITE_SUPABASE_URL=https://jqppkfmgciysgdydoenq.supabase.co
VITE_SUPABASE_ANON_KEY=[í‚¤]
```

### Supabase ì„¤ì •

1. **SQL ì‹¤í–‰**:
   - `001_initial_schema.sql` - í…Œì´ë¸” ìƒì„±
   - `002_insert_sample_data.sql` - ìƒ˜í”Œ ë°ì´í„°

2. **Authentication ì„¤ì •**:
   - Providers â†’ Email â†’ Enable âœ…
   - Providers â†’ Email â†’ Confirm email âŒ
   - Settings â†’ Enable email confirmations âŒ

3. **í…Œì´ë¸” í™•ì¸**:
   - Table Editorì—ì„œ 8ê°œ í…Œì´ë¸” í™•ì¸
   - RLS ì •ì±… í™•ì¸

---

## íŒŒì¼ êµ¬ì¡°

```
YouthV2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ boot/
â”‚   â”‚   â””â”€â”€ supabase.js          # Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ MainLayout.vue       # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LandingPage.vue  # ëœë”© í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.vue    # ë¡œê·¸ì¸
â”‚   â”‚   â”‚   â””â”€â”€ RegisterPage.vue # íšŒì›ê°€ì…
â”‚   â”‚   â”œâ”€â”€ category/
â”‚   â”‚   â”‚   â””â”€â”€ CategoryDetailPage.vue # ì¹´í…Œê³ ë¦¬ ìƒì„¸
â”‚   â”‚   â”œâ”€â”€ learning/
â”‚   â”‚   â”‚   â”œâ”€â”€ QnAPage.vue      # QnA í•™ìŠµ
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPage.vue    # ì˜ìƒ í•™ìŠµ
â”‚   â”‚   â”‚   â””â”€â”€ QuizPage.vue     # OX í€´ì¦ˆ
â”‚   â”‚   â”œâ”€â”€ IndexPage.vue        # ë©”ì¸ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ ProfilePage.vue      # í”„ë¡œí•„ í˜ì´ì§€
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ routes.js            # ë¼ìš°í„° ì„¤ì •
â”‚   â””â”€â”€ App.vue
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ migrations/
â”‚       â”œâ”€â”€ 001_initial_schema.sql    # í…Œì´ë¸” ìƒì„±
â”‚       â””â”€â”€ 002_insert_sample_data.sql # ìƒ˜í”Œ ë°ì´í„°
â”œâ”€â”€ quasar.config.js
â”œâ”€â”€ vercel.json
â”œâ”€â”€ package.json
â””â”€â”€ .env
```

---

## ì£¼ìš” ì»¤ë°‹ íˆìŠ¤í† ë¦¬

1. `Initial commit: í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡°`
2. `Docs: í”„ë¡œì íŠ¸ ìµœì¢… ì •ë¦¬ ë° ë¬¸ì„œ ì—…ë°ì´íŠ¸`
3. `Fix: User Profile ìë™ ìƒì„± íŠ¸ë¦¬ê±° ì¶”ê°€`
4. `Fix: QPage ë ˆì´ì•„ì›ƒ ì—ëŸ¬ ìˆ˜ì •`
5. `Fix: vercel.jsonì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” framework í•„ë“œ ì œê±°`
6. `Fix: QPage ì»´í¬ë„ŒíŠ¸ ì—ëŸ¬ ìˆ˜ì • (white screen í•´ê²°)`
7. `Fix: user_profiles ì§ì ‘ ìƒì„±ìœ¼ë¡œ íšŒì›ê°€ì… ì—ëŸ¬ í•´ê²°`
8. `Feat: IndexPageì™€ CategoryDetailPage Supabase ì—°ë™ ì™„ë£Œ`
9. `Feat: ProfilePage êµ¬í˜„ ì™„ë£Œ`

---

## ë‹¤ìŒ ë‹¨ê³„ (í–¥í›„ ê°œì„  ì‚¬í•­)

### ë‹¨ê¸° (1ì£¼ì¼)
- [ ] QnA, Video, Quiz í˜ì´ì§€ ìµœì¢… ì™„ì„± ë° í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ìµœì í™”
- [ ] ë¡œë”© ìƒíƒœ ê°œì„  (Skeleton)
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

### ì¤‘ê¸° (1ê°œì›”)
- [ ] ê´€ë¦¬ì í˜ì´ì§€ (ì¹´í…Œê³ ë¦¬/QnA/ì˜ìƒ/í€´ì¦ˆ ê´€ë¦¬)
- [ ] í•™ìŠµ í†µê³„ ë° ë¶„ì„ ëŒ€ì‹œë³´ë“œ
- [ ] í•™ìŠµ ë¦¬ë§ˆì¸ë” ì•Œë¦¼
- [ ] ì´ìˆ˜ì¦ ë°œê¸‰ ê¸°ëŠ¥

### ì¥ê¸° (3ê°œì›”)
- [ ] ì‹¤ì œ ì •ì±… ë°ì´í„° API ì—°ë™
- [ ] AI ì±—ë´‡ (ì •ì±… ì§ˆì˜ì‘ë‹µ)
- [ ] ì†Œì…œ ë¡œê·¸ì¸ (Google, Kakao)
- [ ] PWA ì§€ì› (ì˜¤í”„ë¼ì¸ í•™ìŠµ)

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Quasar Framework](https://quasar.dev)
- [Vue 3](https://vuejs.org)
- [Supabase](https://supabase.com/docs)
- [Vercel](https://vercel.com/docs)

### ì •ì±… ì¶œì²˜
- [ëŒ€ì „ì²­ë…„ë‚´ì¼ì¬ë‹¨](https://www.daejeon.go.kr/drh/DrhContentsHtmlView.do?menuSeq=6666)
- [2ì°¨ ì²­ë…„ì •ì±… ê¸°ë³¸ê³„íš](https://www.korea.kr/news/policyNewsView.do?newsId=148957171)
- [2025ë…„ ì²­ë…„ ì£¼ê±°Â·ê¸ˆìœµ ì§€ì›](https://angelsitter.co.kr/board.view.php?board=bbs&no=1822)

---

**ì‘ì„±ì¼**: 2026-01-12
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-12
**ì‘ì„±ì**: Claude Sonnet 4.5 + ì‚¬ìš©ì í˜‘ì—…
